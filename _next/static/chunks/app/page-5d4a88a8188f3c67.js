(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{5906:(e,t,a)=>{Promise.resolve().then(a.bind(a,8958))},8958:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var r=a(5155),s=a(2115),n=a(6275),c=a(7560);n.EA.workerSrc="/pdf.worker.min.mjs";class l{static async extractText(e){let t=e.type;if("application/pdf"===t)return await this.extractTextFromPDF(e);if("application/vnd.openxmlformats-officedocument.wordprocessingml.document"===t)return await this.extractTextFromDOCX(e);if("application/x-hwp"===t)return await this.extractTextFromHWP(e);throw Error("Unsupported file type: ".concat(t))}static async extractTextFromPDF(e){let t=await e.arrayBuffer(),a=await n.YE(t).promise,r="";for(let e=1;e<=a.numPages;e++){let t=await a.getPage(e),s=(await t.getTextContent()).items.map(e=>"str"in e?e.str:"").join(" ");console.log(s),r+=s+"\n"}return r}static async extractTextFromDOCX(e){let t=await e.arrayBuffer(),{value:a}=await c.extractRawText({arrayBuffer:t});return a}static async extractTextFromHWP(e){return"HWP text extraction is not implemented yet for file: ".concat(e.name)}}function i(){let[e,t]=(0,s.useState)([]),[n,c]=(0,s.useState)(""),[i,o]=(0,s.useState)(""),[u,m]=(0,s.useState)([]),[x,d]=(0,s.useState)(!1),p=(0,s.useRef)(null);(0,s.useEffect)(()=>(p.current||(p.current=new Worker(a.tu(new URL(a.p+a.u(257),a.b)),{type:void 0})),()=>{var e;return null===(e=p.current)||void 0===e?void 0:e.terminate()}),[]);let f=async e=>{let a=Array.from(e.target.files||[]);t(await Promise.all(a.map(e=>l.extractText(e))))};return(0,r.jsxs)("main",{className:"flex flex-col items-center p-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"Document Q&A with AI"}),(0,r.jsx)("input",{type:"file",multiple:!0,onChange:f,className:"mb-4",accept:".pdf,.doc,.hwp"}),(0,r.jsx)("textarea",{placeholder:"Ask your question here...",value:n,onChange:e=>c(e.target.value),className:"border rounded w-full p-2 mb-4"}),(0,r.jsx)("button",{onClick:()=>{p.current&&(d(!0),p.current.postMessage({question:n,documents:e}),p.current.onmessage=e=>{o(e.data.answer),m(e.data.references),d(!1)})},className:"bg-blue-500 text-white p-2 rounded",disabled:x||!e.length,children:x?"Processing...":"Ask Question"}),i&&(0,r.jsxs)("div",{className:"mt-6",children:[(0,r.jsx)("h2",{className:"text-xl font-bold",children:"Answer:"}),(0,r.jsx)("p",{children:i}),(0,r.jsx)("h3",{className:"text-lg font-semibold mt-4",children:"References:"}),(0,r.jsx)("ul",{children:u.map((e,t)=>(0,r.jsx)("li",{className:"mb-2",children:e},t))})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[84,714,560,441,517,358],()=>t(5906)),_N_E=e.O()}]);